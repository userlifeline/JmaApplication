# <span style="color:#9DCCE0;">JTIViewer</span><span style="font-size: 60%; text-align: right;"><div>Developed by userlifeline</div></span>

## アプリケーションについて(概要)

__このアプリはJmaTsunamiInfoViewerの後継アプリです.__  
このアプリは気象庁XML電文を利用して、津波情報(VTSE41, VTSE51, VTSE51)を表示するものです.  
通常の情報をリスト形式で表示する機能の他、地図を表示する機能、棒読みちゃんに読み上げてもらう機能を搭載しています.  
また、各自で取得した電文ファイルやオンライン上の電文を利用して同様に表示させることができます.

## 使用方法

- __このアプリには情報の自動取得機能はついていません(気象庁サーバーへの負荷軽減のため).__ 情報発表時に手動で更新してください.
- __既存のどのアプリとの互換性もありません.__ P2PMidpointなどを利用しても情報の取得スピードに変化はありません.
- 利用可能ファイルはXML形式に限られます. txt形式も読み込めるかもしれませんが正常な動作は保証しません.

## 各部分の説明

- 操作ウィンドウ
  > 情報を表示画面に表示する操作を行います.
  - 情報取得
    > 各種情報元からの電文を読み込み、表示します.
    - ローカルファイルを参照
      > ローカルファイルからXML電文を読み込みます.
    - 気象庁XMLを参照
      > 気象庁の情報提供サーバーにアクセスしてXML電文を読み込みます.  
      > 高頻度フィードから取得できなかった場合、自動的に長期フィードから取得します.
  - 自動
    > 自動で実行される機能についての設定・実行を行います.
    - 自動めくり
      > 表示する情報の更新を自動で行います.  
      > 既定の間隔は5秒です.
    - 自動取得
      > 情報の取得を自動で行う機能です.
      > サーバーへの負荷を上げるため、有効にすることや間隔を縮めることはおすすめしません.  
      > 既定の間隔は``5秒``、既定の優先表示情報は``最新の情報``です.
  - 表示画面
    > 表示画面に関する設定を行います.
    - 地点の文字列
      > 表示画面の表の地点名をどの位置に表示するかを設定します.
    - 津波情報発表時にテロップを表示する
      > 津波に関する情報が発表された時に警告文を乗せたテロップを表示します.
    - 津波情報の地図の表示モード
      > 発表区域の見た目を変更します.
      > 1. 点滅モード1 海岸を点滅
      > 2. 点滅モード2 海岸の太さを変更
  - 棒読みちゃん
    > 棒読みちゃんとの連携・実行に関する設定を行います.
    - 津波情報発表時・更新時に棒読みちゃんに読み上げてもらう
    - 棒読みちゃんの設定
      - IPアドレス
      - ポート
      > 棒読みちゃんと接続するための<u>目的の棒読みちゃんが起動しているPCの</u>IPアドレス・ポートを指定します.
      - カスタム設定
        - カスタム設定
          - 音量
          - 速度
          - 音程
          - 声質
          > 棒読みちゃんに読み上げてもらうときの細かい設定を行います.
      - 読み上げテスト
        > 設定画面に設定されている情報で読み上げテストを行います.
      - 設定を保存して反映
  - 効果音
    > 効果音に関する設定を行います
    - 津波情報発表・更新・解除時に効果音を再生
  - 情報
    > アプリに関する情報を表示します.
  - 表示画面を呼び出す
    > 他アプリケーションによって表示画面が隠れてしまった時に最前面に呼び出します.
- 表示画面
  > 情報を表示します.
  - (右クリック) 画面切り替え
    > 各種画面に切り替えます.  
    > 地図については津波に関する情報(VTSE41)が電文の要素に含まれていた場合に限り表示されます.
  - (右クリック) 画像ファイルとして保存
    - この画像のみ
      > 表示画面に現在表示されている情報をスクリーンショットとして撮影します.  
      > 保存先は実行ファイルと同層です. ファイル名は操作画面のタイトルバーに表示されます.
    - すべての情報
      > 表示内容が複数あった場合に情報すべてをスクリーンショットとして撮影します.  
      > 保存先は実行ファイルと同層に作成される撮影時刻が名前になっているディレクトリ内です.
  - (右クリック) クリップボードに保存
    > 表示画面をクリップボードに保存します.
- テロップ
  > 津波情報が発表された時に警告文を表示します.  
  > 緑のカラーキーを設定すると表示を消すことができます.
  - (右クリック) 確認
    > 警告文を消去します

## フォントについて

このアプリでは表示画面に使用するフォントとして「[Koruriフォント](https://koruri.github.io/)」を使用しています.
ライセンスについては同梱の``LICENSE``をご覧ください.

## ページめくりについて

情報が5を超える場合にページをめくる機能が追加されます.  
JmaTsunamiInfoViewerでは表示画面にボタンがありましたが、このアプリでは廃止しました.  
矢印キー(上下、左右)、PageUp/Downキー、Home/Endキーで情報をめくることができます.

## 設定の保存

このアプリには設定項目があります.
設定の保存は(棒読みちゃんの設定を除く)値の更新時ほか、アプリケーションの終了時にも実行されます.  
設定ファイルは``setting.ini``です.

## 「気象庁XMLを参照」ボタン押下時の接続先について

現行(2022/02現在)のPULL型はHTTP(非暗号化)接続でしたが、2021/12/24の気象庁情報基盤部の発表により、2022/03/15を以ってhttpでの接続を終了し、https(常時暗号化)接続に切り替える仕様に変更となりました.  

> 令和 4 年（2022 年）3 月 15 日に気象庁ホームページ（ https://www.jma.go.jp/,
https://www.data.jma.go.jp/ ）を常時暗号化し、http のサービスを終了することに伴い、同ホームページ上で運用している「気象庁防災情報 XML フォーマット形式電文の PULL 型提供環境」においても、一部仕様の変更を行います。

これにより、現在オンラインの取得元として利用しているhttpによる接続を先行して終了し、現在既に公開されているhttps接続に変更しました.

## Q&A

- __Q.__ dmdataへの対応は行われますか.
  > __A.__ 現在dmdataへの対応は検討されていません.

## 更新履歴

<table>
  <tbody>
    <tr>
      <th>版</th>
      <th>アプリ名</th>
      <th colspan="2">バージョン</th>
      <th>更新内容</th>
      <th>DATE</th>
    </tr>
    <tr>
      <td rowspan="10">β</td>
      <td rowspan="3">JTIViewer</td>
      <td rowspan="10">0.0.0</td>
      <td>alpha0</td>
      <td>前身アプリ<code>JmaTsunamiInfoViewer</code>ソースコードの誤削除による開発終了を受けて後継アプリの開発</td>
      <td align="center">2022-01-28</td>
    </tr>
    <tr>
      <td>alpha1</td>
      <td>
        <ul>
          <li>効果音制作者<code>cube-code99</code>様の名前の誤字を修正、本人からの連絡により、<code>cube90</code>様に変更</li>
          <li>2022/03/14 14:00JSTに実施される気象庁XMLの取得元の仕様変更(<a href="http://xml.kishou.go.jp/open_trial/pull_https.pdf" target=_blank rel="noreferrer">気象庁ホームページ常時暗号化（http化）</a>)に対応</li>
          <li>例外発生時にエラーファイルの排出をする機能を追加</li>
        </ul>
      </td>
      <td>2022-??-??</td>
    </tr>
  </tbody>
</table>

### 更新予定

更新予定はありません.

## 注意

- アプリケーションの利用規約に関しては「[Lifeline's Appシリーズ 利用規約](https://sites.google.com/view/lifelines-rules/lifelines-app%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA-%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84)(キャプチャ機能について第2章-第5条-第1項除く)」、「[Lifeline's Appエンドユーザーライセンス事項](https://sites.google.com/view/lifelines-rules/lifelines-app%E3%82%A8%E3%83%B3%E3%83%89%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%A9%E3%82%A4%E3%82%BB%E3%83%B3%E3%82%B9%E4%BA%8B%E9%A0%85)」、「[プライバシーポリシー](https://sites.google.com/view/lifelines-rules/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%90%E3%82%B7%E3%83%BC%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC)」を適用します.
- 詳細な規約については上記3つの規約と情報元の[気象庁](https://www.jma.go.jp)の規約に準じます.
- Koruriフォントを使用しています. ライセンスは``font>LICENSE``に準じます.
- __アプリケーションを実行した時点で各種規約に同意したものとみなします.__
- このアプリを利用したことによるPCの破損・損壊については開発者は一切の責任を負いかねます.
- このアプリの各権利はすべて開発者である生命線にあります.
- 情報は[気象庁](https://www.jma.go.jp)のものを改変利用しています.
- 情報取得に関しては[気象庁ホームページ利用規約](https://www.jma.go.jp/jma/kishou/info/coment.html)に記載されている「[クリエイティブコモンズ 表示 4.0 国際](https://creativecommons.org/licenses/by/4.0/legalcode.ja)」遵守です。
- スクリーンショット、クリップボードについては[Lifeline's Appシリーズ 利用規約](https://sites.google.com/view/lifelines-rules/lifelines-app%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA-%E5%88%A9%E7%94%A8%E8%A6%8F%E7%B4%84)に則り、``JTIViewer <アプリバージョン>``の文字を挿入しています(開発者名は省略).

## スクリーンショット、クリップボードに保存した画像について

本来ならばLifeline's Appシリーズ 利用規約に則って文字としてのアプリ名・開発者名の記載を指定していますが、<u>アプリケーションで出力した画像についてはアプリ側でアプリ名を挿入していますので</u>**原則として(追加で加工等を行って文字を消す等を行わない限り)記載する必要はありません.**  
***注 なお、他のスクリーンショットアプリ(Windows標準スクリーンショット機能、ShareXなど)で撮影されたものについては利用規約に則って開発者名・アプリ名の記載をお願いいたします.***  
また、作成された画像については上記の条件を守ったうえで、「[クリエイティブコモンズ 表示 - 継承 4.0 国際](https://creativecommons.org/licenses/by-sa/4.0/)」を適用します.  
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="クリエイティブ・コモンズ・ライセンス" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br/>

## SPECIAL THANKS

### 特別開発支援

> taifun-dairekuto様 [Twitter](https://twitter.com/taifun_dairekut)

### 効果音作成

> cube90様

## THANKS

### 情報提供

- 情報提供元
  > 気象庁

### デバッグ協力

- デバッガー
  > デバッガーサーバー「Lifeline's App」に参加されている方々

### その他支援してくださった方々

## 連絡先

いずれかから連絡してください. 件名を書いていただけると幸いです.

- Twitter : [@userlifeline](https://twitter.com/userlifeline)
- Discord : ``生命線#7696``
- デバッグサーバー(Discord) : [参加する](https://discord.gg/EEvB7YquPx)

## ドキュメントの更新履歴

<table>
  <tbody>
    <tr>
      <th>DATE</th>
      <th align="center">概要</th>
      <th>備考</th>
      <th colspan="2">対応バージョン</th>
    </tr>
    <tr>
      <td>2022-01-28</td>
      <td align="center">作成</td>
      <td></td>
      <td rowspan="10">0.0.0</td>
      <td>alpha0</td>
    </tr>
    <tr>
      <td>2022-??-??</td>
      <td rowspan="99">更新</td>
      <td>
        <ul>
          <li><code>cube-code99</code>様の名前を本人からの連絡により<code>cube90</code>に変更</li>
        </ul>
      </td>
      <td align="center">alpha1</td>
    </tr>
  </tbody>
</table>

> このアプリが皆さまの地震監視・観測に利用していただけると願って.  
Copyright 2022 userlifeline, ALL RIGHTS RESERVED.
